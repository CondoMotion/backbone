= content_for :scripts do
  = javascript_include_tag "https://js.stripe.com/v1/"

%h2 Sign up
= form_for(@user, :url => registration_path(resource_name)) do |f|
  .form-group
    = f.label :name
    = f.text_field :name, :autofocus => true, class: "form-control"
  .form-group
    = f.label :email
    = f.email_field :email, class: "form-control"
  .form-group
    = f.label :password
    = f.password_field :password, class: "form-control"
  .form-group
    = f.label :password_confirmation
    = f.password_field :password_confirmation, class: "form-control"

  = f.fields_for :owned_company do |cf|
    = cf.hidden_field :stripe_card_token
    = cf.hidden_field :plan_id
    %h4 Company Info
    .well
      #stripe_error
        %noscript JavaScript is not enabled and is required for this form. First enable it in your web browser settings.
      - if @company.stripe_card_token.present?
        %p Credit card has been provided.
      - else
        .row
          .col-sm-8
            .form-group
              = label_tag :card_number, "Credit Card Number"
              = text_field_tag :card_number, nil, name: nil, class: "form-control"
          .col-sm-4
            .form-group
              = label_tag :card_code, "Security Code on Card (CVV)"
              = text_field_tag :card_code, nil, name: nil, class: "form-control"
        .form-group
          = label_tag :card_month, "Card Expiration"
          %br
          = select_month nil, {add_month_numbers: true}, {name: nil, id: "card_month"}
          = select_year nil, {start_year: Date.today.year, end_year: Date.today.year+15}, {name: nil, id: "card_year"}

    .form-group
      = cf.label :name
      = cf.text_field :name, class: "form-control"
    .form-group
      = cf.label :subdomain
      = cf.text_field :subdomain, class: "form-control"
    .form-group
      = cf.label :phone
      = cf.text_field :phone, class: "form-control"
    .form-group
      = cf.label :website
      = cf.text_field :website, class: "form-control"

    = cf.fields_for :address do |af|
      .form-group
        = af.label :address1
        = af.text_field :address1, class: "form-control"
      .form-group
        = af.label :address2
        = af.text_field :address2, class: "form-control"
      .row
        .col-sm-4
          .form-group
            = af.label :city
            = af.text_field :city, class: "form-control"
        .col-sm-4
          .form-group
            = af.label :state
            = af.text_field :state, class: "form-control"
        .col-sm-4
          .form-group
            = af.label :zip
            = af.text_field :zip, class: "form-control"
  = f.submit "Sign up", class: "btn btn-primary"
= render "devise/shared/links"